<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>é‡œå±±æµªæ¼«ä¹‹æ—… 2026</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #4facfe;
            --secondary: #00f2fe;
            --sunset-start: #f6d365;
            --sunset-end: #fda085;
            --twilight: #a18cd1;
            --bg-color: #f5f7fa;
            --card-bg: #ffffff;
            --text-main: #333;
            --text-sub: #666;
            --accent-food: #ff7e5f;
            --accent-spot: #4facfe;
            --accent-shop: #a18cd1;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background: linear-gradient(120deg, #e0c3fc 0%, #8ec5fc 100%);
            margin: 0;
            padding: 0;
            padding-bottom: 80px; /* Nav bar space */
            color: var(--text-main);
            min-height: 100vh;
        }

        /* Header */
        header {
            background: linear-gradient(to right, #4facfe 0%, #00f2fe 100%);
            padding: 20px;
            color: white;
            border-bottom-left-radius: 20px;
            border-bottom-right-radius: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        header h1 { margin: 0; font-size: 1.5rem; text-shadow: 1px 1px 2px rgba(0,0,0,0.1); }
        header .subtitle { font-size: 0.9rem; opacity: 0.9; margin-top: 5px; }
        
        /* Weather Widget Mini */
        .weather-bar {
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(5px);
            border-radius: 10px;
            padding: 8px;
            margin-top: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 0.9rem;
        }

        /* Container */
        .container { padding: 15px; max-width: 600px; margin: 0 auto; }

        /* Day Selector */
        .day-scroller {
            display: flex;
            overflow-x: auto;
            gap: 10px;
            padding-bottom: 10px;
            scrollbar-width: none; /* Firefox */
        }
        .day-scroller::-webkit-scrollbar { display: none; }
        
        .day-chip {
            background: white;
            padding: 8px 16px;
            border-radius: 20px;
            white-space: nowrap;
            font-size: 0.9rem;
            color: var(--text-sub);
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            transition: all 0.3s;
            border: 1px solid transparent;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-width: 50px;
        }
        .day-chip span.date { font-weight: bold; font-size: 1rem; }
        .day-chip span.week { font-size: 0.7rem; color: #999; }

        .day-chip.active {
            background: linear-gradient(to right, var(--sunset-start) 0%, var(--sunset-end) 100%);
            color: white;
            transform: scale(1.05);
        }
        .day-chip.active span.week { color: rgba(255,255,255,0.9); }

        /* Cards */
        .card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            position: relative;
            border-left: 5px solid transparent;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .card.spot { border-left-color: var(--accent-spot); }
        .card.food { border-left-color: var(--accent-food); }
        .card.shop { border-left-color: var(--accent-shop); }
        .card.transport { border-left-color: #666; }

        .card-header { display: flex; justify-content: space-between; align-items: start; }
        .card-title { font-weight: bold; font-size: 1.1rem; margin-bottom: 5px; color: #333; }
        .card-time { font-size: 0.85rem; color: #888; background: #eee; padding: 2px 6px; border-radius: 4px; }
        
        .tags { display: flex; gap: 5px; flex-wrap: wrap; margin: 8px 0; }
        .tag { font-size: 0.75rem; padding: 2px 8px; border-radius: 4px; font-weight: 600; }
        .tag.must-eat { background: #ffeffe; color: #ff5e62; border: 1px solid #ff5e62; }
        .tag.vbp { background: #e0f7fa; color: #0097a7; border: 1px solid #0097a7; }
        .tag.resv { background: #fff3e0; color: #ef6c00; border: 1px solid #ef6c00; }
        
        .guide-tip {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 10px;
            font-size: 0.9rem;
            color: #555;
            margin-top: 10px;
            border-left: 3px solid #ffd700;
        }
        .guide-tip strong { color: #333; }

        .action-btn {
            display: inline-flex;
            align-items: center;
            margin-top: 10px;
            padding: 8px 12px;
            background-color: #03C75A; /* Naver Green */
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: bold;
        }
        .action-btn i { margin-right: 5px; }

        /* Tools Section */
        .tools-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .tool-card { background: white; padding: 15px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .tool-card h3 { margin-top: 0; color: var(--text-main); font-size: 1rem; }
        textarea, input { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; font-family: inherit; margin-bottom: 5px; }
        .budget-display { font-size: 1.5rem; font-weight: bold; color: var(--accent-food); text-align: center; margin: 10px 0; }

        /* Navigation Bottom */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            width: 100%;
            background: white;
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
            z-index: 200;
        }
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: 0.8rem;
            color: #999;
            text-decoration: none;
            width: 33%;
            cursor: pointer;
        }
        .nav-item.active { color: var(--accent-spot); }
        .nav-item i { font-size: 1.2rem; margin-bottom: 3px; }

        /* Views */
        .view-section { display: none; }
        .view-section.active { display: block; }

    </style>
</head>
<body>

<!-- Header -->
<header>
    <h1>é‡œå±±è”šè—ä¹‹æ—… ğŸŒŠ</h1>
    <div class="subtitle">10å¤©9å¤œ | å»£å®‰é‡Œ â€¢ æµ·é›²å° â€¢ å—æµ¦æ´</div>
    <div class="weather-bar" onclick="window.open('https://www.accuweather.com/en/kr/busan/222888/weather-forecast/222888', '_blank')">
        <span><i class="fas fa-cloud-sun"></i> é‡œå±±å³æ™‚å¤©æ°£</span>
        <span>é»æ“ŠæŸ¥çœ‹è©³æƒ… <i class="fas fa-chevron-right"></i></span>
    </div>
</header>

<!-- Main Content -->
<div class="container">

    <!-- ITINERARY VIEW -->
    <div id="view-itinerary" class="view-section active">
        <!-- Day Selector -->
        <div class="day-scroller" id="dayScroller">
            <!-- JS will populate this -->
        </div>

        <div id="itineraryContent" style="margin-top: 15px;">
            <!-- JS will populate this -->
        </div>
    </div>

    <!-- TOOLS VIEW -->
    <div id="view-tools" class="view-section">
        <div class="tools-grid">
            <div class="tool-card" style="grid-column: span 2;">
                <h3><i class="fas fa-plane"></i> èˆªç­è³‡è¨Š (ä¸­è¯èˆªç©º)</h3>
                <div style="background:#f0f8ff; padding:10px; border-radius:8px; margin-bottom:10px;">
                    <strong style="color:#0056b3;">å»ç¨‹ 2/14 (é€±å…­)</strong><br>
                    CI186 15:40 - 18:50<br>
                    <span style="font-size:0.9rem; color:#666;">
                    <i class="fas fa-plane-departure"></i> TPE æ¡ƒåœ’ T2 (ç¬¬äºŒèˆªå»ˆ)<br>
                    <i class="fas fa-plane-arrival"></i> PUS é‡‘æµ· <strong>åœ‹éš›èˆªå»ˆ</strong>
                    </span>
                </div>
                <div style="background:#fff0f5; padding:10px; border-radius:8px;">
                    <strong style="color:#c2185b;">å›ç¨‹ 2/23 (é€±ä¸€)</strong><br>
                    CI189 11:50 - 13:30<br>
                    <span style="font-size:0.9rem; color:#666;">
                    <i class="fas fa-plane-departure"></i> PUS é‡‘æµ· <strong>åœ‹éš›èˆªå»ˆ</strong><br>
                    <i class="fas fa-plane-arrival"></i> TPE æ¡ƒåœ’ T2 (ç¬¬äºŒèˆªå»ˆ)
                    </span>
                </div>
                <p style="font-size:0.8rem; color:#888; margin-top:5px;">*TPE èˆªå»ˆä»¥é›»å­æ©Ÿç¥¨ç‚ºæº–ï¼ŒPUS è«‹å‹™å¿…å‰å¾€åœ‹éš›èˆªå»ˆã€‚</p>
            </div>
            
            <div class="tool-card" style="grid-column: span 2;">
                <h3><i class="fas fa-hotel"></i> ä½å®¿è³‡è¨Š</h3>
                <div style="font-size: 0.9rem; line-height: 1.6;">
                    <p><strong>D1-D3 å»£å®‰é‡Œ:</strong> æ°‘æ¨‚æ°´é‚Šè·¯ 49 (æ°‘å®¿)</p>
                    <p><strong>D4-D6 æµ·é›²å°:</strong> L7 Haeundae</p>
                    <p><strong>D7-D9 å—æµ¦:</strong> Stanford Hotel Busan</p>
                </div>
            </div>

            <div class="tool-card" style="grid-column: span 2;">
                <h3><i class="fas fa-calculator"></i> ç°¡æ˜“è¨˜å¸³</h3>
                <div class="budget-display">â‚© <span id="totalSpent">0</span></div>
                <input type="number" id="expenseAmount" placeholder="é‡‘é¡ (éŸ“å¹£)">
                <input type="text" id="expenseNote" placeholder="é …ç›® (å¦‚: çƒ¤è‚‰)">
                <button onclick="addExpense()" style="width:100%; background:var(--accent-spot); color:white; border:none; padding:10px; border-radius:6px; margin-top:5px;">æ–°å¢æ”¯å‡º</button>
                <ul id="expenseList" style="padding-left: 20px; font-size: 0.9rem; color:#555;"></ul>
            </div>

            <div class="tool-card" style="grid-column: span 2;">
                <h3><i class="fas fa-pen"></i> å¿ƒå¾—ç­†è¨˜</h3>
                <textarea id="tripNotes" rows="6" placeholder="åœ¨é€™è£¡å¯«ä¸‹æ—…è¡Œçš„å¿ƒå¾—..." oninput="saveNotes()"></textarea>
            </div>
        </div>
    </div>
</div>

<!-- Bottom Navigation -->
<div class="bottom-nav">
    <div class="nav-item active" onclick="switchView('itinerary', this)">
        <i class="fas fa-map-marked-alt"></i>
        <span>è¡Œç¨‹</span>
    </div>
    <div class="nav-item" onclick="switchView('tools', this)">
        <i class="fas fa-toolbox"></i>
        <span>å·¥å…·</span>
    </div>
</div>

<script>
    // --- Data Source ---
    const tripData = [
        {
            date: "2/14",
            week: "é€±å…­",
            title: "Day 1 æŠµé”èˆ‡å»£å®‰é‡Œå¤œæ™¯",
            events: [
                { type: "transport", time: "15:40", title: "é£›æ©Ÿ CI186", desc: "TPE(T2) -> PUS(åœ‹éš›èˆªå»ˆ) 18:50æŠµé”" },
                { type: "spot", time: "20:00", title: "å»£å®‰é‡Œç„¡äººæ©Ÿè¡¨æ¼”", desc: "æ¯é€±å…­é™å®šï¼æµ·é‚Šè§€è³ã€‚", link: "https://map.naver.com/v5/search/Gwangalli%20Beach" },
                { type: "food", time: "æ™šé¤", title: "æ°´é‚Šæœ€é«˜è±¬è‚‰æ¹¯é£¯ æœ¬åº—", desc: "å¿…é»ï¼šè±¬è‚‰æ¹¯é£¯ã€‚æ’éšŠååº—ã€‚", tags: ["å¿…åƒâ­â­â­â­â­"], link: "https://map.naver.com/v5/search/%EC%88%98%EB%B3%80%EC%B5%9C%EA%B3%A0%EB%8F%BC%EC%A7%80%EA%B5%AD%EB%B0%A5" },
                { type: "hotel", time: "ä½å®¿", title: "å»£å®‰é‡Œ49 æ°‘å®¿", desc: "æ°‘æ¨‚æ°´é‚Šè·¯ 49" }
            ]
        },
        {
            date: "2/15",
            week: "é€±æ—¥",
            title: "Day 2 Spa Land èˆ‡è³¼ç‰©",
            events: [
                { type: "spot", time: "æ—©ä¸Š", title: "SPA LAND Centum City", desc: "äº”æ˜Ÿç´šæ±—è’¸å¹•ã€‚ç”¨ VBP å¯å…è²»4å°æ™‚ã€‚", tags: ["VBPå…è²»", "éœ€è‡ªå‚™è­·è†šå“"], link: "https://reurl.cc/gDxApR", guide: "æ³¨æ„ï¼š2/16-17ä¼‘æ¯ï¼Œæ‰€ä»¥ä»Šå¤©å…ˆä¾†ï¼è£¡é¢æ³¡éºµå’Œç”œç±³é‡€å¿…é»ã€‚" },
                { type: "shop", time: "ä¸‹åˆ", title: "æ–°ä¸–ç•Œç™¾è²¨ Centum City", desc: "B1/B2 æ½®ç‰Œå¤©å ‚ (Covernat, What it isn't, National Geographic)ã€‚", link: "https://map.naver.com/v5/search/Shinsegae%20Centum%20City" },
                { type: "spot", time: "18:30", title: "Yacht Holic éŠè‰‡é«”é©—", desc: "äº«å—æµ·ä¸Šå¤œæ™¯ã€‚", tags: ["VBPé©ç”¨"], link: "https://map.naver.com/v5/search/Yacht%20Holic" }
            ]
        },
        {
            date: "2/16",
            week: "é€±ä¸€",
            title: "Day 3 è‰²å½©é‘‘å®šèˆ‡å»£å®‰ç¾é£Ÿ",
            events: [
                { type: "food", time: "09:00", title: "Working Holiday æ—©åˆé¤", desc: "æµ·æ™¯ç¬¬ä¸€æ’æ—©åˆé¤ã€‚", link: "https://naver.me/5A3QDoxv" },
                { type: "spot", time: "11:00", title: "è‰²å½©é‘‘å®š & è­‰ä»¶ç…§", desc: "BBDI Studio / Lavieensu (è¥¿é¢)", link: "https://map.naver.com/v5/search/Seomyeon" },
                { type: "food", time: "åˆé¤", title: "Nasari Sigdang (ë‚˜ì‚¬ë¦¬ì‹ë‹¹)", desc: "æœ€æ¨ï¼šæµ·é®®ç¸½åŒ¯åˆ€å‰Šéºµã€‚", tags: ["å¿…åƒ", "æµ·æ™¯"], link: "https://naver.me/FFSDywqU" },
                { type: "food", time: "æ™šé¤", title: "å½¥é™½çƒ¤ç‰›è‚‰ å»£å®‰é‡Œåº—", desc: "å‚³çµ±éŸ“å¼çƒ¤ç‰›è‚‰ã€‚", link: "https://map.naver.com/v5/search/%EC%96%B8%EC%96%91%EB%B6%88%EA%B3%A0%EA%B8%B0%20%EA%B4%91%EC%95%88" }
            ]
        },
        {
            date: "2/17",
            week: "é€±äºŒ",
            title: "Day 4 æµ·é›²å°èˆ‡è† å›Šåˆ—è»Š",
            events: [
                { type: "transport", time: "æ—©ä¸Š", title: "ç§»å‹•è‡³æµ·é›²å° L7 é£¯åº—", desc: "å…ˆå¯„æ”¾è¡Œæ" },
                { type: "transport", time: "äº¤é€š", title: "æµ·å²¸åˆ—è»Š -> æ¾äº­ç«™", desc: "å‰å¾€ Luge", tags: ["VBPé©ç”¨"] },
                { type: "spot", time: "æ´»å‹•", title: "Skyline Luge æ»‘è»Š", desc: "ç©å…©è¶Ÿï¼å¯ä»¥ç”¨ VBP å…Œæ›ã€‚", tags: ["VBPå…è²»"], link: "https://reurl.cc/3xRnKR" },
                { type: "spot", time: "æ—¥è½", title: "Busan X The Sky", desc: "æœ€é«˜æ˜Ÿå·´å…‹ï¼Œçœ‹æ—¥å¤œæ™¯äº¤æ›¿ã€‚", tags: ["VBPå…è²»"], link: "https://reurl.cc/jDaEm2" },
                { type: "food", time: "æ™šé¤", title: "å‘³è´Šç‹çƒ¤è‚‰ æµ·é›²å°åº—", desc: "å¿…é»ï¼šè±¬é ¸è‚‰ã€å†·éºµã€æ³¡èœè±¬è‚‰æ¹¯ã€‚", tags: ["å¿…åƒ", "éœ€æ’éšŠ"], link: "https://reurl.cc/M8zEW3" },
                { type: "food", time: "å®µå¤œ", title: "å¯†é™½è±¬è‚‰æ¹¯é£¯", desc: "æµ·é›²å°å¤§é“ä¸Šï¼Œ24å°æ™‚ç‡Ÿæ¥­ã€‚", link: "https://naver.me/FMA6Dghu" }
            ]
        },
        {
            date: "2/18",
            week: "é€±ä¸‰",
            title: "Day 5 æ¨‚å¤©æ¨‚åœ’èˆ‡é’æ²™æµ¦",
            events: [
                { type: "spot", time: "ç™½å¤©", title: "æ¨‚å¤©ä¸–ç•Œ / Outlet", desc: "æ¨‚åœ’å¯ç”¨ VBP å…Œæ›ã€‚", tags: ["VBPå…è²»"], link: "https://map.naver.com/v5/search/Lotte%20World%20Busan" },
                { type: "food", time: "é»å¿ƒ", title: "è‡ªç„¶é“é¹½éºµåŒ…", desc: "å°¾æµ¦ç«™é™„è¿‘ï¼Œå¿…è²·ï¼", tags: ["å¿…è²·"], link: "https://map.naver.com/v5/search/%EC%9E%90%EC%97%B0%EB%8F%84%EC%86%8C%EA%B8%88%EB%B9%B5" },
                { type: "transport", time: "17:00", title: "å¤©ç©ºè† å›Šåˆ—è»Š", desc: "é ç´„ä»£è™Ÿ 0731ã€‚å°¾æµ¦ -> é’æ²™æµ¦ã€‚", tags: ["é‡è¦é ç´„"], link: "https://map.naver.com/v5/search/Blue%20Line%20Park" },
                { type: "spot", time: "å‚æ™š", title: "é’æ²™æµ¦å¹³äº¤é“ & æ‰‡è²è¡—", desc: "æ‹çŒç±ƒé«˜æ‰‹å¹³äº¤é“ã€‚", guide: "èµ°è·¯10åˆ†é˜å¯åˆ°æ‰‡è²ä¸€æ¢è¡—ã€‚" },
                { type: "food", time: "æ™šé¤", title: "é“ç†™å®¶ (Dohee-ga) çƒ¤è²", desc: "æ¨è–¦ï¼šç¶œåˆçƒ¤è²+æµ·é®®æ‹‰éºµã€‚", tags: ["æµ·æ™¯ç¬¬ä¸€æ’"], link: "https://reurl.cc/y7AVka" },
                { type: "food", time: "å®µå¤œ", title: "æµ·é›²å°å¸‚å ´", desc: "æµ·é®®ç…é¤…ã€å¹´ç³• (å¤–å¸¶å›é£¯åº—åƒ)ã€‚", link: "https://map.naver.com/v5/search/Haeundae%20Market" }
            ]
        },
        {
            date: "2/19",
            week: "é€±å››",
            title: "Day 6 é’æ¾å†°è°·ä¸€æ—¥éŠ",
            events: [
                { type: "transport", time: "08:00", title: "æµ·é›²å°7è™Ÿå‡ºå£é›†åˆ", desc: "ä¸€æ—¥éŠåœ˜é«”é›†åˆé»", tags: ["æº–æ™‚é›†åˆ"] },
                { type: "spot", time: "å…¨å¤©", title: "é’æ¾å†°è°· & æµ·å²¸æ‘æ°æ°æ°", desc: "æµ¦é ‚å¤©ç©ºæ­¥é“", guide: "å±±å€è¼ƒå†·ï¼Œè¨˜å¾—ç©¿ä¿æš–ã€‚" },
                { type: "hotel", time: "ä½å®¿", title: "L7 æµ·é›²å°", desc: "çºŒä½" }
            ]
        },
        {
            date: "2/20",
            week: "é€±äº”",
            title: "Day 7 ç§»å‹•è‡³å—æµ¦æ´",
            events: [
                { type: "transport", time: "æ—©ä¸Š", title: "ç§»å‹•è‡³ Stanford Hotel", desc: "å—æµ¦æ´" },
                { type: "food", time: "åˆé¤", title: "æœ­å˜å…¶å¸‚å ´", desc: "åƒæµ·é®®ï¼", link: "https://map.naver.com/v5/search/Jagalchi%20Market" },
                { type: "food", time: "é»å¿ƒ", title: "å¯Œå¹³ç½é ­å¸‚å ´", desc: "å¿…åƒï¼šMilgot å¹´ç³•ã€‚", tags: ["å¿…åƒ"], link: "https://map.naver.com/v5/search/Bupyeong%20Kkangtong%20Market" },
                { type: "shop", time: "ä¸‹åˆ", title: "åœ‹éš›å¸‚å ´ & å…‰å¾©è·¯", desc: "è²·æ£‰è¢«ã€é€›é£¾å“ã€‚é ç•™ 2-3 å°æ™‚ã€‚", link: "https://map.naver.com/v5/search/Gukje%20Market" },
                { type: "spot", time: "ä¼‘æ¯", title: "Foot Bath Cafe View", desc: "æ³¡è…³å’–å•¡å»³ï¼Œç·©è§£èµ°è·¯ç–²å‹ã€‚", link: "https://map.naver.com/v5/search/Busan%20Foot%20Bath" }
            ]
        },
        {
            date: "2/21",
            week: "é€±å…­",
            title: "Day 8 å½±å³¶è—è¡“ä¹‹æ—…",
            events: [
                { type: "spot", time: "ä¸Šåˆ", title: "å½±å³¶ ARTE Museum", desc: "æ²ˆæµ¸å¼å…‰å½±è—è¡“ï¼Œåª²ç¾ TeamLabã€‚", tags: ["å¿…å»â­â­â­â­â­"], link: "https://map.naver.com/v5/search/Arte%20Museum%20Busan" },
                { type: "spot", time: "ä¸‹åˆ", title: "ç™½æ·ºç˜æ–‡åŒ–æ‘", desc: "æ²¿æµ·æ­¥é“ï¼Œé©åˆæ‹ç…§ã€‚", link: "https://map.naver.com/v5/search/Huinnyeoul%20Culture%20Village" },
                { type: "food", time: "ä¸‹åˆèŒ¶", title: "Thrilling on the mug", desc: "è¶…ç¾æµ·æ™¯å’–å•¡å»³ã€‚", link: "https://map.naver.com/v5/search/Thrilling%20on%20the%20mug" }
            ]
        },
        {
            date: "2/22",
            week: "é€±æ—¥",
            title: "Day 9 ç”˜å·æ–‡åŒ–æ‘èˆ‡æ¾å³¶",
            events: [
                { type: "spot", time: "ä¸Šåˆ", title: "ç”˜å·æ–‡åŒ–æ‘", desc: "å°ç‹å­æ‰“å¡é»ã€‚", tags: ["å¿…å»"], link: "https://map.naver.com/v5/search/Gamcheon%20Culture%20Village" },
                { type: "spot", time: "é«”é©—", title: "éŸ“æœé«”é©—", desc: "é è¨ˆæ›è£æ‹æ” 1.5 å°æ™‚ã€‚" },
                { type: "transport", time: "äº¤é€š", title: "Uber è‡³æ¾å³¶", desc: "ç´„ 15-20 åˆ†é˜è»Šç¨‹ã€‚" },
                { type: "spot", time: "ä¸‹åˆ", title: "æ¾å³¶æµ·ä¸Šçºœè»Š", desc: "æ°´æ™¶è»Šå»‚çœ‹æµ·æ™¯ã€‚", tags: ["å¿…å»â­â­â­â­â­"], link: "https://map.naver.com/v5/search/Songdo%20Marine%20Cable%20Car" }
            ]
        },
        {
            date: "2/23",
            week: "é€±ä¸€",
            title: "Day 10 å›ç¨‹",
            events: [
                { type: "transport", time: "11:50", title: "é£›æ©Ÿ CI189", desc: "PUS(åœ‹éš›èˆªå»ˆ) -> TPE(T2) 13:30æŠµé”", tags: ["å†è¦‹é‡œå±±"] }
            ]
        }
    ];

    // --- App Logic ---
    let currentDayIndex = 0;

    function init() {
        renderDayScroller();
        renderItinerary(0);
        loadExpenses();
        loadNotes();
    }

    function renderDayScroller() {
        const scroller = document.getElementById('dayScroller');
        scroller.innerHTML = '';
        tripData.forEach((day, index) => {
            const chip = document.createElement('div');
            chip.className = `day-chip ${index === 0 ? 'active' : ''}`;
            
            // Layout for Date and Week
            chip.innerHTML = `
                <span class="date">${day.date}</span>
                <span class="week">${day.week}</span>
            `;

            chip.onclick = () => {
                document.querySelectorAll('.day-chip').forEach(c => c.classList.remove('active'));
                chip.classList.add('active');
                renderItinerary(index);
            };
            scroller.appendChild(chip);
        });
    }

    function renderItinerary(index) {
        const container = document.getElementById('itineraryContent');
        const day = tripData[index];
        
        // Include Weekday in Title
        let html = `<h2 style="margin-left:5px; margin-bottom:15px; color:#444;">${day.date} (${day.week}) ${day.title}</h2>`;
        
        // Weather Hint (Static Logic based on Feb avg)
        const tempLow = 2 + Math.floor(Math.random() * 2); 
        const tempHigh = 9 + Math.floor(Math.random() * 3);
        html += `
            <div style="background: linear-gradient(to right, #89f7fe, #66a6ff); padding: 10px; border-radius: 12px; color: white; margin-bottom: 20px; font-size: 0.9rem; display: flex; align-items: center;">
                <i class="fas fa-temperature-low" style="margin-right: 10px; font-size: 1.2rem;"></i>
                <div>
                    <strong>é æ¸¬æ°£æº«:</strong> ${tempLow}Â°C - ${tempHigh}Â°C <br>
                    <span style="opacity: 0.9; font-size: 0.8rem;">2æœˆæµ·é¢¨å¤§ï¼Œå»ºè­°æ´‹è”¥å¼ç©¿æ­ã€‚</span>
                </div>
            </div>
        `;

        day.events.forEach(event => {
            let tagsHtml = '';
            if (event.tags) {
                event.tags.forEach(tag => {
                    let className = 'tag';
                    if (tag.includes('å¿…')) className += ' must-eat';
                    if (tag.includes('VBP')) className += ' vbp';
                    if (tag.includes('é ç´„')) className += ' resv';
                    tagsHtml += `<span class="${className}">${tag}</span>`;
                });
            }

            let guideHtml = event.guide ? `<div class="guide-tip"><i class="fas fa-lightbulb" style="color:#fbc02d; margin-right:5px;"></i> <strong>å°éŠæ‚„æ‚„è©±:</strong> ${event.guide}</div>` : '';
            
            let btnHtml = event.link ? `<a href="${event.link}" target="_blank" class="action-btn"><i class="fas fa-map-marker-alt"></i> Naver Map</a>` : '';

            let icon = 'fa-map-pin';
            if(event.type === 'food') icon = 'fa-utensils';
            if(event.type === 'transport') icon = 'fa-bus';
            if(event.type === 'shop') icon = 'fa-shopping-bag';
            if(event.type === 'hotel') icon = 'fa-bed';

            html += `
                <div class="card ${event.type}">
                    <div class="card-header">
                        <div>
                            <div class="card-title"><i class="fas ${icon}" style="margin-right:5px; opacity:0.7;"></i> ${event.title}</div>
                            <div class="tags">${tagsHtml}</div>
                        </div>
                        <div class="card-time">${event.time}</div>
                    </div>
                    <div style="color: #666; font-size: 0.95rem; margin-top: 5px;">${event.desc}</div>
                    ${guideHtml}
                    ${btnHtml}
                </div>
            `;
        });

        container.innerHTML = html;
        currentDayIndex = index;
    }

    function switchView(viewName, navEl) {
        document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
        document.getElementById(`view-${viewName}`).classList.add('active');
        
        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
        navEl.classList.add('active');
    }

    // --- Tools Logic (LocalStorage) ---
    function addExpense() {
        const amt = document.getElementById('expenseAmount').value;
        const note = document.getElementById('expenseNote').value;
        if(!amt) return;

        const expense = { amt: parseInt(amt), note: note || 'é›œæ”¯', id: Date.now() };
        let expenses = JSON.parse(localStorage.getItem('busan_expenses') || '[]');
        expenses.push(expense);
        localStorage.setItem('busan_expenses', JSON.stringify(expenses));
        
        document.getElementById('expenseAmount').value = '';
        document.getElementById('expenseNote').value = '';
        loadExpenses();
    }

    function loadExpenses() {
        const expenses = JSON.parse(localStorage.getItem('busan_expenses') || '[]');
        const list = document.getElementById('expenseList');
        let total = 0;
        list.innerHTML = '';
        expenses.forEach(ex => {
            total += ex.amt;
            const li = document.createElement('li');
            li.innerHTML = `${ex.note}: â‚©${ex.amt.toLocaleString()} <span style="color:red; cursor:pointer; margin-left:10px;" onclick="deleteExpense(${ex.id})">Ã—</span>`;
            list.appendChild(li);
        });
        document.getElementById('totalSpent').innerText = total.toLocaleString();
    }

    function deleteExpense(id) {
        let expenses = JSON.parse(localStorage.getItem('busan_expenses') || '[]');
        expenses = expenses.filter(e => e.id !== id);
        localStorage.setItem('busan_expenses', JSON.stringify(expenses));
        loadExpenses();
    }

    function saveNotes() {
        const notes = document.getElementById('tripNotes').value;
        localStorage.setItem('busan_notes', notes);
    }

    function loadNotes() {
        const notes = localStorage.getItem('busan_notes');
        if(notes) document.getElementById('tripNotes').value = notes;
    }

    // Run
    init();

</script>
</body>
</html>